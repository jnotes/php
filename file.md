# 文件系统

## 目录操作

### 打开目录

使用`opendir`函数打开一个目录，`opendir`函数将返回一个资源对象，用于存储当前的目录资源`opendir(string path)`通常为了确保程序的正确性，在打开目录之前使用`is_dir`函数判断路径的有效性。`bool is_dir(string path)​​​`

### 关闭目录

使用`closedir`函数关闭目录`void closedir(dir_resource)​`

### 读取目录

使用`readdir`函数读取目录中的文件，并返回文件名`string readdir(dir_resource)`该函数按照文件系统中的文件排序返回文件名。每次执行阅读下一个文件并返回一条记录。

```PHP
$dir = opendir('downloads/');​
while($file = readdir($dir)){
  echo $file;
​​}
​​​closedir($dir)​;
```

会输出`.`和`..`两个文件目录，其中`.`用于表示当前目录,`..`用于表示上一级目录​

### 创建目录

使用`mkdir`函数创建目录

### 删除目录

使用`rmdir`函数删除目录

## 文件操作

### 打开文件

`fopen(string filenpath,string mode)`函数打开一个目录。返回一个资源对象，用户存储当前的文件资源。​

#### 文件打开的mode方式

- `r` 只读方式打开，文件指针指向文件头
- `r+` 读写方式打开，将文件指针指向文件头
- `w` 写入方式打开，如果文件存在则将文件清空，如果文件不存在则创建
- `w+` 读写方式打开，如果文件存在则将文件清空，如果文件不存在则创建
- `a` 写入方式打开，如果文件存在则追加，如果文件不存在则创建​
- `a+` 读写方式打开，如果文件存在则追加，如果文件不存在则创建
- `x` 写入方式打开，如果文件存在则打开失败，如果文件不存在则创建
- `x+` 读写方式打开，如果文件存在则打开失败，如果文件不存在则创建

### 关闭文件

使用`fclose`函数关闭文件

### 读取文件

#### 读取文件中的一个字符

使用`fgetc`函数来读取文件中的一个字符

#### 读取文件中的一行

使用`fgets`来读取文件中的一行

#### 读取文件中的任意长度

使用`fread`读取文件的任意长度

#### 读取文件的所有内容

使用`file_get_contents`读取文件的所有内容

### 写入文件

使用`fwrite`函数将数据写入文件

### 删除文件

使用`unlink`函数删除文件

### 复制文件

使用`copy`函数复制文件

### 读取远程文件

远程文件的操作与本地文件的操作类似，只是将文件用网址代替。需要注意的是读取远程文件一般仅使用读操作。PHP提供了一个配置参数来控制是否允许读取远程网址，该配置参数即php.ini文件中的`allow_url_fopen`选项，只要打开这个选项，就可以使用网址来代替文件路径。
